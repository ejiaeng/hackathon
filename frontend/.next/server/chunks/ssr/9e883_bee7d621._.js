module.exports=[65022,(a,b,c)=>{b.exports=function(a){return a&&a.__esModule?a:{default:a}}},43750,(a,b,c)=>{var d=function(a){"use strict";var b,c=Object.prototype,d=c.hasOwnProperty,e=Object.defineProperty||function(a,b,c){a[b]=c.value},f="function"==typeof Symbol?Symbol:{},g=f.iterator||"@@iterator",h=f.asyncIterator||"@@asyncIterator",i=f.toStringTag||"@@toStringTag";function j(a,b,c){return Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}),a[b]}try{j({},"")}catch(a){j=function(a,b,c){return a[b]=c}}function k(a,c,d,f){var g,h,i,j,k=Object.create((c&&c.prototype instanceof q?c:q).prototype);return e(k,"_invoke",{value:(g=a,h=d,i=new B(f||[]),j=m,function(a,c){if(j===n)throw Error("Generator is already running");if(j===o){if("throw"===a)throw c;return D()}for(i.method=a,i.arg=c;;){var d=i.delegate;if(d){var e=function a(c,d){var e=d.method,f=c.iterator[e];if(b===f)return(d.delegate=null,"throw"===e&&c.iterator.return&&(d.method="return",d.arg=b,a(c,d),"throw"===d.method))?p:("return"!==e&&(d.method="throw",d.arg=TypeError("The iterator does not provide a '"+e+"' method")),p);var g=l(f,c.iterator,d.arg);if("throw"===g.type)return d.method="throw",d.arg=g.arg,d.delegate=null,p;var h=g.arg;return h?h.done?(d[c.resultName]=h.value,d.next=c.nextLoc,"return"!==d.method&&(d.method="next",d.arg=b),d.delegate=null,p):h:(d.method="throw",d.arg=TypeError("iterator result is not an object"),d.delegate=null,p)}(d,i);if(e){if(e===p)continue;return e}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(j===m)throw j=o,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);j=n;var f=l(g,h,i);if("normal"===f.type){if(j=i.done?o:"suspendedYield",f.arg===p)continue;return{value:f.arg,done:i.done}}"throw"===f.type&&(j=o,i.method="throw",i.arg=f.arg)}})}),k}function l(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(a){return{type:"throw",arg:a}}}a.wrap=k;var m="suspendedStart",n="executing",o="completed",p={};function q(){}function r(){}function s(){}var t={};j(t,g,function(){return this});var u=Object.getPrototypeOf,v=u&&u(u(C([])));v&&v!==c&&d.call(v,g)&&(t=v);var w=s.prototype=q.prototype=Object.create(t);function x(a){["next","throw","return"].forEach(function(b){j(a,b,function(a){return this._invoke(b,a)})})}function y(a,b){var c;e(this,"_invoke",{value:function(e,f){function g(){return new b(function(c,g){!function c(e,f,g,h){var i=l(a[e],a,f);if("throw"===i.type)h(i.arg);else{var j=i.arg,k=j.value;return k&&"object"==typeof k&&d.call(k,"__await")?b.resolve(k.__await).then(function(a){c("next",a,g,h)},function(a){c("throw",a,g,h)}):b.resolve(k).then(function(a){j.value=a,g(j)},function(a){return c("throw",a,g,h)})}}(e,f,c,g)})}return c=c?c.then(g,g):g()}})}function z(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]),2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]),this.tryEntries.push(b)}function A(a){var b=a.completion||{};b.type="normal",delete b.arg,a.completion=b}function B(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(z,this),this.reset(!0)}function C(a){if(a){var c=a[g];if(c)return c.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var e=-1,f=function c(){for(;++e<a.length;)if(d.call(a,e))return c.value=a[e],c.done=!1,c;return c.value=b,c.done=!0,c};return f.next=f}}return{next:D}}function D(){return{value:b,done:!0}}return r.prototype=s,e(w,"constructor",{value:s,configurable:!0}),e(s,"constructor",{value:r,configurable:!0}),r.displayName=j(s,i,"GeneratorFunction"),a.isGeneratorFunction=function(a){var b="function"==typeof a&&a.constructor;return!!b&&(b===r||"GeneratorFunction"===(b.displayName||b.name))},a.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,s):(a.__proto__=s,j(a,i,"GeneratorFunction")),a.prototype=Object.create(w),a},a.awrap=function(a){return{__await:a}},x(y.prototype),j(y.prototype,h,function(){return this}),a.AsyncIterator=y,a.async=function(b,c,d,e,f){void 0===f&&(f=Promise);var g=new y(k(b,c,d,e),f);return a.isGeneratorFunction(c)?g:g.next().then(function(a){return a.done?a.value:g.next()})},x(w),j(w,i,"Generator"),j(w,g,function(){return this}),j(w,"toString",function(){return"[object Generator]"}),a.keys=function(a){var b=Object(a),c=[];for(var d in b)c.push(d);return c.reverse(),function a(){for(;c.length;){var d=c.pop();if(d in b)return a.value=d,a.done=!1,a}return a.done=!0,a}},a.values=C,B.prototype={constructor:B,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=b,this.done=!1,this.delegate=null,this.method="next",this.arg=b,this.tryEntries.forEach(A),!a)for(var c in this)"t"===c.charAt(0)&&d.call(this,c)&&!isNaN(+c.slice(1))&&(this[c]=b)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var c=this;function e(d,e){return h.type="throw",h.arg=a,c.next=d,e&&(c.method="next",c.arg=b),!!e}for(var f=this.tryEntries.length-1;f>=0;--f){var g=this.tryEntries[f],h=g.completion;if("root"===g.tryLoc)return e("end");if(g.tryLoc<=this.prev){var i=d.call(g,"catchLoc"),j=d.call(g,"finallyLoc");if(i&&j){if(this.prev<g.catchLoc)return e(g.catchLoc,!0);else if(this.prev<g.finallyLoc)return e(g.finallyLoc)}else if(i){if(this.prev<g.catchLoc)return e(g.catchLoc,!0)}else if(j){if(this.prev<g.finallyLoc)return e(g.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;c>=0;--c){var e=this.tryEntries[c];if(e.tryLoc<=this.prev&&d.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var f=e;break}}f&&("break"===a||"continue"===a)&&f.tryLoc<=b&&b<=f.finallyLoc&&(f=null);var g=f?f.completion:{};return(g.type=a,g.arg=b,f)?(this.method="next",this.next=f.finallyLoc,p):this.complete(g)},complete:function(a,b){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&b&&(this.next=b),p},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,c.afterLoc),A(c),p}},catch:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if("throw"===d.type){var e=d.arg;A(c)}return e}}throw Error("illegal catch attempt")},delegateYield:function(a,c,d){return this.delegate={iterator:C(a),resultName:c,nextLoc:d},"next"===this.method&&(this.arg=b),p}},a}(b.exports);try{regeneratorRuntime=d}catch(a){"object"==typeof globalThis?globalThis.regeneratorRuntime=d:Function("r","regeneratorRuntime = r")(d)}},24244,(a,b,c)=>{b.exports=a.r(43750)},28944,(a,b,c)=>{function d(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}h.done?b(i):Promise.resolve(i).then(d,e)}b.exports=function(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function h(a){d(g,e,f,h,i,"next",a)}function i(a){d(g,e,f,h,i,"throw",a)}h(void 0)})}}},37361,(a,b,c)=>{"use strict";var d=a.r(65022);Object.defineProperty(c,"__esModule",{value:!0}),c.default=function(a){return g.apply(this,arguments)};var e=d(a.r(24244)),f=d(a.r(28944));function g(){return(g=(0,f.default)(e.default.mark(function a(b){var c,d;return e.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=document.createElement("video"),d=new Promise(function(a,b){c.addEventListener("loadedmetadata",function(){c.duration===1/0?(c.currentTime=Number.MAX_SAFE_INTEGER,c.ontimeupdate=function(){c.ontimeupdate=null,a(c.duration),c.currentTime=0}):a(c.duration)}),c.onerror=function(a){return b(a.target.error)}}),c.src="string"==typeof b||b instanceof String?b:window.URL.createObjectURL(b),a.abrupt("return",d);case 4:case"end":return a.stop()}},a)}))).apply(this,arguments)}},44520,a=>{"use strict";var b=a.i(74808);a.i(9019);let c=(0,b.registerPlugin)("Filesystem",{web:()=>a.A(68244).then(a=>new a.FilesystemWeb)});!function(a=!1){}();let d=(0,b.registerPlugin)("BlobWriter");function e({path:a,directory:b,blob:d,recursive:e}){return c.writeFile({directory:b,path:a,recursive:e,data:""}).then(function e(){if(0===d.size)return Promise.resolve();let f=d.slice(0,393216);return d=d.slice(393216),new Response(f).arrayBuffer().then(function(d){return c.appendFile({directory:b,path:a,data:window.btoa(Array.from(new Uint8Array(d)).map(function(a){return String.fromCharCode(a)}).join(""))})}).then(e)})}let f=Object.freeze(function(a){let{path:f,directory:g,blob:h,fast_mode:i=!1,recursive:j,on_fallback:k}=a;return h&&Number.isSafeInteger(h.size)&&"string"==typeof h.type?"web"===b.Capacitor.getPlatform()?i?function({path:a,directory:b,blob:d,recursive:e}){return c.writeFile({directory:b,path:a,recursive:e,data:""}).then(function(){return new Promise(function(c,e){function f(a){e(a.target.error)}let g=window.indexedDB.open("Disc");g.onerror=f,g.onsuccess=function(){let e=g.result.transaction("FileStorage","readwrite");e.onerror=f;let h=e.objectStore("FileStorage"),i=`/${b}/${a.replace(/^\//,"")}`,j=h.get(i);j.onsuccess=function(){j.result.size=d.size,j.result.content=d,h.put(j.result).onsuccess=function(){c(void 0)}}}})})}(a):e(a):Promise.all([d.get_config(),c.getUri({path:f,directory:g})]).then(function([a,b]){let c=b.uri.replace("file://","");return(window.CapacitorWebFetch||window.fetch)(a.base_url+c+(j?"?recursive=true":""),{headers:{authorization:a.auth_token},method:"put",body:h}).then(function(a){if(204!==a.status)throw Error("Bad HTTP status: "+a.status);return b.uri})}).catch(function(b){return void 0!==k&&k(b),e(a)}):Promise.reject(Error("Not a Blob."))});var g=a.i(37361),h=a.i(59848);let i=()=>({value:!0}),j=()=>({value:!1}),k={"audio/aac":".aac","audio/mp4":".mp3","audio/webm;codecs=opus":".ogg","audio/webm":".ogg","audio/ogg;codecs=opus":".ogg"},l=()=>new Promise(()=>void 0);class m{constructor(){this.mediaRecorder=null,this.chunks=[],this.pendingResult=l()}static async canDeviceVoiceRecord(){var a;return(null==(a=null==navigator?void 0:navigator.mediaDevices)?void 0:a.getUserMedia)==null||null==m.getSupportedMimeType()?j():i()}async startRecording(a){if(null!=this.mediaRecorder)throw Error("ALREADY_RECORDING");if(!(await m.canDeviceVoiceRecord()).value)throw Error("DEVICE_CANNOT_VOICE_RECORD");if(!(await m.hasAudioRecordingPermission().catch(()=>i())).value)throw Error("MISSING_PERMISSION");return navigator.mediaDevices.getUserMedia({audio:!0}).then(b=>this.onSuccessfullyStartedRecording(b,a)).catch(this.onFailedToStartRecording.bind(this))}async stopRecording(){if(null==this.mediaRecorder)throw Error("RECORDING_HAS_NOT_STARTED");try{return this.mediaRecorder.stop(),this.mediaRecorder.stream.getTracks().forEach(a=>a.stop()),this.pendingResult}catch(a){throw Error("FAILED_TO_FETCH_RECORDING")}finally{this.prepareInstanceForNextOperation()}}static async hasAudioRecordingPermission(){return null==navigator.permissions.query?null==navigator.mediaDevices?Promise.reject(Error("COULD_NOT_QUERY_PERMISSION_STATUS")):navigator.mediaDevices.getUserMedia({audio:!0}).then(()=>i()).catch(()=>{throw Error("COULD_NOT_QUERY_PERMISSION_STATUS")}):navigator.permissions.query({name:"microphone"}).then(a=>({value:"granted"===a.state})).catch(()=>{throw Error("COULD_NOT_QUERY_PERMISSION_STATUS")})}static async requestAudioRecordingPermission(){return(await m.hasAudioRecordingPermission().catch(()=>j())).value?i():navigator.mediaDevices.getUserMedia({audio:!0}).then(()=>i()).catch(()=>j())}pauseRecording(){if(null==this.mediaRecorder)throw Error("RECORDING_HAS_NOT_STARTED");return"recording"===this.mediaRecorder.state?(this.mediaRecorder.pause(),Promise.resolve(i())):Promise.resolve(j())}resumeRecording(){if(null==this.mediaRecorder)throw Error("RECORDING_HAS_NOT_STARTED");return"paused"===this.mediaRecorder.state?(this.mediaRecorder.resume(),Promise.resolve(i())):Promise.resolve(j())}getCurrentStatus(){return null==this.mediaRecorder?Promise.resolve({status:h.RecordingStatus.NONE}):"recording"===this.mediaRecorder.state?Promise.resolve({status:h.RecordingStatus.RECORDING}):"paused"===this.mediaRecorder.state?Promise.resolve({status:h.RecordingStatus.PAUSED}):Promise.resolve({status:h.RecordingStatus.NONE})}static getSupportedMimeType(){if((null==MediaRecorder?void 0:MediaRecorder.isTypeSupported)==null)return null;let a=Object.keys(k).find(a=>MediaRecorder.isTypeSupported(a));return null!=a?a:null}onSuccessfullyStartedRecording(a,b){return this.pendingResult=new Promise((c,d)=>{this.mediaRecorder=new MediaRecorder(a),this.mediaRecorder.onerror=()=>{this.prepareInstanceForNextOperation(),d(Error("FAILED_TO_RECORD"))},this.mediaRecorder.onstop=async()=>{var a,e,h;let i,j,l=m.getSupportedMimeType();if(null==l){this.prepareInstanceForNextOperation(),d(Error("FAILED_TO_FETCH_RECORDING"));return}let n=new Blob(this.chunks,{type:l});if(n.size<=0){this.prepareInstanceForNextOperation(),d(Error("EMPTY_RECORDING"));return}if(null!=b){let c=null!=(h=null==(e=null==(a=b.subDirectory)?void 0:a.match(/^\/?(.+[^/])\/?$/))?void 0:e[1])?h:"";i=`${c}/recording-${new Date().getTime()}${k[l]}`,await f({blob:n,directory:b.directory,fast_mode:!0,path:i,recursive:!0})}else j=await m.blobToBase64(n);let o=await (0,g.default)(n);this.prepareInstanceForNextOperation(),c({value:{recordDataBase64:j,mimeType:l,msDuration:1e3*o,path:i}})},this.mediaRecorder.ondataavailable=a=>this.chunks.push(a.data),this.mediaRecorder.start()}),i()}onFailedToStartRecording(){throw this.prepareInstanceForNextOperation(),Error("FAILED_TO_RECORD")}static blobToBase64(a){return new Promise(b=>{let c=new FileReader;c.onloadend=()=>{let a=String(c.result),d=a.split("base64,");b((d.length>1?d[1]:a).trim())},c.readAsDataURL(a)})}prepareInstanceForNextOperation(){if(null!=this.mediaRecorder&&"recording"===this.mediaRecorder.state)try{this.mediaRecorder.stop()}catch(a){console.warn("While trying to stop a media recorder, an error was thrown",a)}this.pendingResult=l(),this.mediaRecorder=null,this.chunks=[]}}class n extends b.WebPlugin{constructor(){super(...arguments),this.voiceRecorderInstance=new m}canDeviceVoiceRecord(){return m.canDeviceVoiceRecord()}hasAudioRecordingPermission(){return m.hasAudioRecordingPermission()}requestAudioRecordingPermission(){return m.requestAudioRecordingPermission()}startRecording(a){return this.voiceRecorderInstance.startRecording(a)}stopRecording(){return this.voiceRecorderInstance.stopRecording()}pauseRecording(){return this.voiceRecorderInstance.pauseRecording()}resumeRecording(){return this.voiceRecorderInstance.resumeRecording()}getCurrentStatus(){return this.voiceRecorderInstance.getCurrentStatus()}}a.s(["VoiceRecorderWeb",()=>n],44520)}];

//# sourceMappingURL=9e883_bee7d621._.js.map